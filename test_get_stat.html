<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
    <script src="jquery.min.js"></script>
</head>
<body>
<form id="test_get_stat" action="get_stat.php" method="post">
    selfMac <input type="text" value="00:1A:7D:DA:71:0B" name="selfMac" /><br />
    from <input type="text" value="2015-04-26 03:14:24" name="from" /><br />
    to <input type="text" value="2015-04-26 03:14:34" name="to" /><br />
    <button type="submit">old do</button>
    <button type="button" id="dyn">dym do</button>
</form>
<div style="width: 800px;">
    Status Code: <div id="status_code" style="height: 16px;"></div>
    <pre id="result" style="width: 800px; height: 600px; border: 1px #999 dashed; overflow-x: auto; overflow-y: auto;"></pre>
</div>
</body>
<script type="application/javascript" language="javascript">
    var now = new Date(Date.now());
    var past30s = new Date(now);
    past30s.setSeconds(past30s.getSeconds() - 30);

    function DateToSqlFormat(date) {
        return date.toISOString()
                .replace('T',' ')
                .replace('Z','')
                .replace(/\.\d{3}/g, '');
    }

    $('input[name=to]').val(DateToSqlFormat(now));
    $('input[name=from]').val(DateToSqlFormat(past30s));

    $('#dyn').click(function() {
        $.ajax({ // create an AJAX call...
            data: $('#test_get_stat').serialize(), // get the form data
            type: $('#test_get_stat').attr('method'), // GET or POST
            url: $('#test_get_stat').attr('action') // the file to call
        }).done(function (dt, tS, xhr) {
            $('#status_code').html(xhr.status + ": " + tS);

            $('#result').html(xhr.responseText); // update the DIV
        }).fail(function (xhr, tS, ex) {
            $('#status_code').html(xhr.status + ": " + tS);

            $('#result').html(xhr.responseText); // update the DIV
        });
    });
</script>
</html>